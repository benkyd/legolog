<html>
<head>
	<title>LegoLog Home!</title>
	<link rel="icon" type="image/svg+xml" href="/res/favicon.svg">
	<link rel="stylesheet" type="text/css" href="global.css">
	<link rel="preconnect" href="https://fonts.googleapis.com">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<!-- ask rich about loading fonts elsewhere -->
	<link href="https://fonts.googleapis.com/css2?family=Londrina+Solid&display=swap" rel="stylesheet">
	<link href="https://fonts.googleapis.com/css2?family=Josefin+Sans&display=swap" rel="stylesheet">
	<script src="components/components.js"></script>

	<script src="gl-matrix.js"></script>
	<script src="utils.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/glm-js@0.0.6-c/build/glm-js.min.js"></script>
	<script src="index.js"></script>
</head>
<body>
	<loading-component></loading-component>
	<notification-bar-component>
		15:03:04 - New Limited Time Offer, Get Any Lego Set for Â£10 Using Code LEGO10
	</notification-bar-component>

	<limited-margin>
		<navbar-component></navbar-component>
		
		<content-margin>
			
			<div id="top-picks">
				Today's Top Picks
			</div>

		</content-margin>

		<canvas id="webglviewer" width="640" height="480"></canvas>
		<script type="x-shader/vs" id="vertex-draw">
			#version 300 es
	
			layout(std140, column_major) uniform;
			
			layout(location=0) in vec4 position;
			layout(location=1) in vec2 uv;
			layout(location=2) in vec4 normal;
			
			uniform SceneUniforms {
				mat4 viewProj;
				vec4 eyePosition;
				vec4 lightPosition;
			} uScene;       
			
			uniform mat4 uModel;
	
			out  vec3 vPosition;
			out  vec2 vUV;
			out  vec3 vNormal;
			void main() {
				vec4 worldPosition = uModel * position;
				vPosition = worldPosition.xyz;
				vUV = uv;
				vNormal = (uModel * normal).xyz;
				gl_Position = uScene.viewProj * worldPosition;
			}
		</script>
		<script type="x-shader/vf" id="fragment-draw">
			#version 300 es
			precision highp float;
	
			layout(std140, column_major) uniform;
	
			uniform SceneUniforms {
				mat4 viewProj;
				vec4 eyePosition;
				vec4 lightPosition;
			} uScene;
	
			uniform sampler2D tex;
			
			in vec3 vPosition;
			in vec2 vUV;
			in vec3 vNormal;
	
			out vec4 fragColor;
			void main() {
				vec3 color = vec3(vUV, 1.0);
	
				vec3 normal = normalize(vNormal);
				vec3 eyeVec = normalize(uScene.eyePosition.xyz - vPosition);
				vec3 incidentVec = normalize(vPosition - uScene.lightPosition.xyz);
				vec3 lightVec = -incidentVec;
				float diffuse = max(dot(lightVec, normal), 0.0);
				float highlight = pow(max(dot(eyeVec, reflect(incidentVec, normal)), 0.0), 100.0);
				float ambient = 0.1;
				fragColor = vec4(color * (diffuse + highlight + ambient), 1.0);
			}
		</script>

	</limited-margin>
</body>
